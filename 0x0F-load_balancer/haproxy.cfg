# Global section
global
    # Specify the maximum number of allowed connections (adjust as needed)
    maxconn 2000

    # Set HAProxy to run in daemon mode
    daemon

    # Configure log options
    log /dev/log local0
    log /dev/log local1 notice

    # Enable stats socket for runtime administration
    stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners

# Defaults section
defaults
    # Set mode to HTTP
    mode http

    # Define the default log format
    log global

    # Specify options for connection timeout and request timeout
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

# Frontend and Backend sections
frontend my_frontend
    # Bind to a specific IP address and port
    bind *:80

    # Define ACLs and actions as needed
    # acl block_keep_alive req.hdr(Connection) -i keep-alive
    # http-request deny if block_keep_alive

    # Define the default backend
    default_backend my_backend

backend my_backend
    # Define the backend servers and their ports
    server server1 192.168.1.101:8080 maxconn 32 check
    server server2 192.168.1.102:8080 maxconn 32 check
    # Add more servers as needed

# Listen section (optional, for additional services)
#listen my_service
#    bind *:8080
#    mode http
#    balance roundrobin
#    server server1 192.168.1.103:8080 maxconn 32 check
#    server server2 192.168.1.104:8080 maxconn 32 check
#    Add more servers as needed

